{% include "common/_header.html" %}

<div class="row">
  <div class="col-md-12">
    <div class="text-center">
      <h1>Simulation Overview</h1>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-5 col-md-offset-1">
    <div class="name-header">
      <b>Name:
      </b>
    </div>
    <div class="name-text">{{ simulation.name }}</div>
  </div>
  <div class="col-md-5">
    <div class="description-header">
      <b>Description:</b>
    </div>


    <div class="description-text">
      {{ simulation.description }}
    </div>
  </div>
</div>

<br><hr><br>

<div class="row col-lg-12" align="center">
  <h3>2-D Scatter Plot:</h3>
</div>

<div class="row col-lg-6" align="center" style="float:left">
  <h4> Select X Axis Variable:</h4>
  <div class="radio">
  {% for name in variable_names %}
    {% if forloop.first %}
      <input type="radio" name="optionsRadiosX" id="checkbox-x-{{name}}" class="axis-checkbox-x" checked data-varkey="{{name}}"> {{name}}
      <br>
    {% else %}
      <input type="radio" name="optionsRadiosX" id="checkbox-x-{{name}}" class="axis-checkbox-x" data-varkey="{{name}}"> {{name}}
      <br>
    <!-- <script>
      $(".axis-checkbox-x").change(function(){
        alert("something got checked or unchecked");
      })
    </script> -->
    {% endif %}
  {% endfor %}
  </div>
</div>

<div class="row col-lg-6" align="center">
  <h4> Select Y Axis Variable:</h4>
  {% for name in variable_names %}
    {% if forloop.last %}
      <input type="radio" name="optionsRadiosY" id="checkbox-y-{{name}}" class="axis-checkbox-y" checked data-varkey="{{name}}"> {{name}}
      <br>
    {% else %}
      <input type="radio" name="optionsRadiosY" id="checkbox-y-{{name}}" class="axis-checkbox-y" data-varkey="{{name}}"> {{name}}
      <br>
      <!-- <script>
        $(".axis-checkbox-x").change(function(){
          alert("something got checked or unchecked");
        })
      </script> -->
      {% endif %}
    {% endfor %}
</div>

<div class="row col-lg-6 x" align="center">
  <fieldset class="checkboxFieldsetx" class="col-lg-6"></fieldset>
</div>


<div class="row col-lg-6 y" align="center">
  <fieldset class="checkboxFieldsety" class="col-lg-6"></fieldset>
  <br>
  <style>
    .checkboxFieldsetx {
        width: 250px;
      }
    .checkboxFieldsetx .checkboxx{
        float: left;
        width: 50px;
    }
    .checkboxFieldsety {
        width: 250px;
      }
    .checkboxFieldsety .checkboxx{
        float: left;
        width: 50px;
    }
    .box{
        float: left;
    }
  </style>
</div>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <div class="text-center">
      <div id="myChart"></div>
    </div>
  </div>
</div>

<br><hr><br>

<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <div class="text-center">
      <h3>3-D Scatter Plot:</h3>
      <div id="myChart3d"></div>
    </div>
  </div>
</div>

<br><br><br><br><br><br>

<script>
  $(document).ready(function(){
    var mychart = document.getElementById("myChart");
    var mychart3d = document.getElementById("myChart3d");
    window.scireact = {}
    window.scireact.simulation_values = {{ simulation_values }};

    var keys = []
    for (key in window.scireact.simulation_values) {
      if (window.scireact.simulation_values.hasOwnProperty(key)) {
        keys.push(key);
      }
    }

    xVal = keys[2]
    yVal = keys[1]

    var data = [{
      x: window.scireact.simulation_values[xVal],
      y: window.scireact.simulation_values[yVal], 
      type: "scatter"
    }]
    var layout = {
      title: yVal + " vs " + xVal, 
      xaxis: {
        title: xVal, 
        titlefont: {
          family: "Courier New, monospace", 
          size: 18,
          color: "#7f7f7f"
        },
        autorange: true,
        zeroline: true
      }, 
      yaxis: {
        title: yVal, 
        titlefont: {
          family: "Courier New, monospace", 
          size: 18, 
          color: "#7f7f7f"
        },
        autorange: true,
        zeroline: true
      }
    };
    Plotly.plot(mychart, data, layout);
    $(".modebar-btn[data-title='Autoscale']")[0].click()

    $(".axis-checkbox-x").change(function(){
      var newX = $(this).data().varkey;

      if (keys.indexOf(newX) != -1)
        xVal = newX

      mychart.data[0].x = window.scireact.simulation_values[xVal];
      Plotly.redraw(mychart);

      var update = {
        title: yVal + " vs " + xVal, 
        xaxis: {
          title: xVal, 
          titlefont: {
            family: "Courier New, monospace", 
            size: 18,
            color: "#7f7f7f"
          },
          autorange: true,
          zeroline: true
        }, 
        yaxis: {
          title: yVal, 
          titlefont: {
            family: "Courier New, monospace", 
            size: 18, 
            color: "#7f7f7f"
          },
          autorange: true,
          zeroline: true
        }
      }
      Plotly.relayout(mychart, update)
      $(".modebar-btn[data-title='Autoscale']")[0].click()

    });

    $(".axis-checkbox-y").change(function(){
      var newY = $(this).data().varkey;

      if (keys.indexOf(newY) != -1)
        yVal = newY

      mychart.data[0].y = window.scireact.simulation_values[yVal];
      Plotly.redraw(mychart);

      var update = {
        title: yVal + " vs " + xVal, 
        xaxis: {
          title: xVal,
          titlefont: {
            family: "Courier New, monospace", 
            size: 18, 
            color: "#7f7f7f"
          },
          autorange: true,
          zeroline: true
        },
        yaxis: {
          title: yVal,
          titlefont: {
            family: "Courier New, monospace", 
            size: 18, 
            color: "#7f7f7f"
          },
          autorange: true,
          zeroline: true
        }
      }
      Plotly.relayout(mychart, update)
      $(".modebar-btn[data-title='Autoscale']")[0].click()
    });

    zVal = keys[0]
    var data3d = [{
      x: window.scireact.simulation_values["R"],
      y: window.scireact.simulation_values["W"],
      z: window.scireact.simulation_values["Time"],
      type: "scatter3d"
    }];
    var layout3d = {
      title: yVal + " vs " + zVal + " over " + xVal, 
      xaxis: {
        title: xVal, 
        titlefont: {
          family: "Courier New, monospace", 
          size: 18,
          color: "#7f7f7f"
        },
        autorange: true,
        zeroline: true
      },
      yaxis: {
        title: yVal, 
        titlefont: {
          family: "Courier New, monospace", 
          size: 18, 
          color: "#7f7f7f"
        },
        autorange: true,
        zeroline: true
      },
      zaxis: {
        title: zVal, 
        titlefont: {
          family: "Courier New, monospace", 
          size: 18, 
          color: "#7f7f7f"
        },
        autorange: true,
        zeroline: true
      }
    };
    Plotly.plot(myChart3d, data3d, layout3d);

  });
</script>

{% include "common/_footer.html" %}